jQuery(document).ready(function(e){var s={message:null,overlayCSS:{background:"#fff",opacity:.6,cursor:"default"}};e("select.js-address-select").change(function(){var t=e(this),a=t.val();if(a>0){var o=t.closest(".order_data_column");o.block(s);var n={action:"woocommerce_json_get_address",address_id:a,security:t.data("nonce")},r=t.data("address_type");e.post(ajaxurl,n,function(s){if(e('[name^="_'+r+'_"]').each(function(){-1==wc_companies_order_fields.ignore_fields.indexOf(e(this).attr("name"))&&e(this).val("")}),s.address)for(var t in s.address){var a="_"+r+"_"+t;if(-1==wc_companies_order_fields.ignore_fields.indexOf(a)){var o=s.address[t];if("state"==t)setTimeout(function(){var t="_"+r+"_state",a=s.address.state,o=e('[name="'+t+'"]');o.closest(".edit_address").find(".js_field-country").data("woocommerce.stickState-"+s.address.country,a),o.val(a),console.log(o,a),o.trigger("change")},0),n.closest(".edit_address").find(".js_field-country").data("woocommerce.stickState-"+s.address.country,o);else{var n=e('[name="'+a+'"]');n.val(o),n.trigger("change")}}}},"json").always(function(e){o.unblock()})}}),e(".wc-company-search, .wc-customer-search").change(function(){var t=e(".wc-company-search"),a=e(".wc-customer-search");e(".order_data_column").block(s);var o={action:"woocommerce_json_get_user_company_addresses",company_id:t.val(),user_id:a.val()};e.post(ajaxurl,o,function(s){e("select.js-address-select").each(function(){if(optionsAsString="",s.addresses){var t=1,a="";for(var o in s.addresses)1==t&&(a+=s.addresses[o].title),optionsAsString+="<option value='"+s.addresses[o].id+"'>"+s.addresses[o].title+"</option>",t++}e(this).find("option").remove().end().append(e(optionsAsString)).closest(".form-field").find("span.select2-chosen").text(a)})},"json").always(function(s){console.log(s),e(".order_data_column").unblock()})}),e(".js-create-entity-form").submit(function(t){t.preventDefault();var a=e(this),o=a.find(".response"),n=e(a.data("search-field"));o.html(""),a.block(s),e.post(ajaxurl,e(this).serializeObject(),function(s){if(o.append(s.message),"success"==s.response){if(tb_remove(),a.trigger("reset"),n.is("select")){var t=e("<option>");t.attr("value",s.object_id).text(s.object_title),n.prepend(t)}n.val(s.object_id).trigger("change").siblings(".select2-container").find(".select2-selection__placeholder").text(s.object_title)}},"json").always(function(e){console.log(e),a.unblock()})})});